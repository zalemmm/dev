<div id="buying">
	<h3>Votre devis en ligne</h3>
	<!-- <a href="../wp-content/enseignes/"><<< Retour enseignes</a> -->
	<form class="jotform-form" action="" method="post" name="form_1060900217" id="1060900217" accept-charset="utf-8" onsubmit="JKakemono.cal_komadur(); return false;">
		<input type="hidden" name="formID" value="1060900217" />
		<div class="form-all">
			<ul class="form-section">

				<li class="form-line select" id="id_0">
					<span class="helpButton">
            <img class="helpImg" src="../wp-content/plugins/fbshop/images/question.png">
						<span class="helpText" id="helpTextrectoverso" style="visibility:hidden;">
              <b>Recto:</b><br/>
							Impression sur 1 face.<br/>
              Impression sur 2 faces.<br/>
						</span>
					</span>

					<select class="form-dropdown validate[required]" id="input_0" name="q0_usage" onclick="JKakemono.czyscpola(); ">
						<option value="">choisir l'impression</option>
						<option value="recto">Recto </option>
						<option value="rectoverso">Recto/Verso </option>
					</select>
				</li>

				<li class="form-line select" id="id_HD">
					<span class="helpButton"><img class="helpImg" src="../wp-content/plugins/fbshop/images/question.png">
						<span class="helpText" id="helpTextHD" style="visibility:hidden;">
							• <span class="highlight"><u><b>Impression kömadur Haute définition :</b></u></span><br/>impression directe UV HD 1200x1200Dpi. Pour une impression akylux parfaite même de très près.<br />
							• <span class="highlight"><u><b>Impression kömadur standard :</b></u></span><br/>impression directe UV 600x600Dpi. Pour une impression kömadur pas cher de très bonne qualité à 1 mètre.<a href="../wp-content/uploads/2016/12/impression-HD-panneaux-akylux-pas-cher-big.jpg" title="impression Haute définition panneaux kömadur pas cher"><img class="" title="impressio HD panneaux akylux pas cher" alt="panneaux imprimés kömadur pas cher" src="../wp-content/uploads/2016/12/impression-HD-panneaux-akylux-pas-cher.jpg"></a><br/>
						</span>
					</span>

					<select class="form-dropdown validate[required]" id="input_HD" name="qHD_maquette" onclick="JKakemono.czyscpola(); ">
						<option value="">choisir qualité d'impression...</option>
            <option value="standard">Standard</option>
						<option value="HD">Haute définition</option>
					</select>
				</li>


				<li class="form-line select" id="id_4">
          <span class="helpButton">
						<img class="helpImg" src="../wp-content/plugins/fbshop/images/question.png">
						<span class="helpText" id="helpTextoption" style="visibility:hidden;">
              <b>Perçage:</b><br/>
							Nous perçons votre panneau kömadur pour faciliter sa pose.<br/>
							<b>Pelliculage:</b><br/>
							Nous posons un film de protecttion sur votre panneau kömadur. Ce pelliculage offre à votre support d’impression une protection optimale contre les éléments climatiques (abrasion, UV, rayures, vandalisme…). Vous aurez le choix entre une <strong>pelliculage brillant, mate, ou anti graffiti</strong><br/>
						</span>
					</span>

					<select class="form-dropdown validate[required]" id="input_4" name="4_usage" onclick="JKakemono.czyscpola(); ">
						<option value="">choisir une option</option>
            <option value="sans">sans option</option>
						<option value="perçage">perçage</option>
            <option value="lamination">pelliculage</option>
            <option value="pelliculage et perçage">pelliculage + perçage</option>
					</select>
				</li>

				<li class="form-line select" id="id_lamination">
					<span class="helpButton">
						<img class="helpImg" src="../wp-content/plugins/fbshop/images/question.png">
						<span class="helpText" id="helpTextlamination" style="visibility:hidden;">
							<b>Pelliculage brillant:</b><br/>
							Le pelliculage brillant offre des couleurs plus vives et plus éclatantes.<br/>
							<b>Pelliculage mat:</b><br/>
							Le pelliculage mat rend les couleurs plus chaudes et évite les reflets au soleil ou aux néons.<br/>
							<b>Pelliculage anti graffiti:</b><br/>
							Composé à 100% de polyester d’une épaisseur de 36µ, ce pelliculage haut de gamme brillant offre à votre support d’impression une protection renforcé contre tous les éléments climatiques et extérieur.<br/>
						</span>
					</span>

					<select class="form-dropdown validate[required]" id="input_lamination" name="lamination_usage" onclick="JKakemono.czyscpola(); ">
						<option value="">choisir le type de pelliculage</option>
						<option value="pelliculage brillant">pelliculage brillant</option>
						<option value="pelliculage mat">pelliculage mat</option>
						<option value="pelliculage laqué anti graffiti">pelliculage anti graffiti</option>
					</select>
				</li>

				<li class="form-line select" id="id_lamination-perçage">
					<span class="helpButton">
						<img class="helpImg" src="../wp-content/plugins/fbshop/images/question.png">
						<span class="helpText" id="helpTextlaminationperçage" style="visibility:hidden;">
							<b>Pelliculage brillant:</b><br/>
							Le pelliculage brillant offre des couleurs plus vives et plus éclatantes.<br/>
							<b>Pelliculage mat:</b><br/>
							Le pelliculage mat rend les couleurs plus chaudes et évite les reflets au soleil ou aux néons.<br/>
							<b>Pelliculage anti graffiti:</b><br/>
							Composé à 100% de polyester d’une épaisseur de 36µ, ce pelliculage haut de gamme brillant offre à votre support d’impression une protection renforcé contre tous les éléments climatiques et extérieur.<br/>
						</span>
					</span>

					<select class="form-dropdown validate[required]" id="input_lamination-perçage" name="lamination-perçage_usage" onclick="JKakemono.czyscpola(); ">
						<option value="">choisir le type de pelliculage</option>
						<option value="pelliculage brillant">pelliculage brillant</option>
						<option value="pelliculage mat">pelliculage mat</option>
						<option value="pelliculage laqué anti graffiti">pelliculage anti graffiti</option>
					</select>
				</li>


				<li class="form-line select" id="id_5">
					<span class="helpButton">
						<img class="helpImg" src="../wp-content/plugins/fbshop/images/question.png">
						<span class="helpText" id="helpTextperçage" style="visibility:hidden;">
							<b>Perçage:</b><br/>
							Choisissez le nombre de perçages sur votre panneau pour le fixer.<br/>
						</span>
					</span>

					<select class="form-dropdown validate[required]" id="input_5" name="5_usage" onclick="JKakemono.czyscpola(); ">
						<option value="">choisir le perçage</option>
						<option value="2">2 trous</option>
						<option value="4">4 trous </option>
						<option value="6">6 trous </option>
						<option value="8">8 trous </option>
						<option value="10">10 trous </option>
					</select>
				</li>


				<li class="form-line select" id="id_6">
					<span class="helpButton">
						<img class="helpImg" src="../wp-content/plugins/fbshop/images/question.png">
						<span class="helpText" id="helpTextmaquette" style="visibility:hidden;"></span>
					</span>
					<select class="form-dropdown validate[required]" id="input_6" name="q6_maquette" onclick="JKakemono.czyscpola(); ">
						<option value="">fichier d'impression...</option>
						<option value="sansbat">j’ai mon fichier, je ne souhaite pas de BAT</option>
						<option value="user">j’ai mon fichier, je souhaite un BAT</option>
						<option value="config">je crée ma maquette en ligne</option>
						<option value="fb">France banderole crée la mise en page</option>
					</select>
				</li>

				<li class="form-line select" id="id_signature">
					<span class="helpButton"><img class="helpImg" src="../wp-content/plugins/fbshop/images/question.png">
						<span class="helpText" id="helpTextsignature" style="visibility:hidden;"></span>
					</span>
					<select class="form-dropdown validate[required] optionsignature" id="input_signature" name="qsignature_signature" onchange="JKakemono.czyscpola(); ">
						<option value="">logo France Banderole ?</option>
						<option value="signature FB">produit signé</option>
						<option value="sans signature">produit neutre +5,00 €</option>
					</select>
				</li>



                <!--taille et quantité------------------------------------------------->
				<li class="form-line optionsformline2" id="id_13" data-trigger="spinner">
					<label class="form-label-left label-highlight" id="label_13" for="input_13">quantité :<br /><span class="small">(par visuel)</span></label>
					<input type="text" class="form-textbox validate[required, Numeric]" id="input_13" name="q13_quantite" size="20" value="1" onclick="JKakemono.czyscpola(); " data-rule="quantity" />
					<div class="spinner-controls">
	   			 <a href="javascript:;" data-spin="up" onclick="JKakemono.czyscpola();"><i class="fa fa-plus" aria-hidden="true"></i></a>
	   			 <a href="javascript:;" data-spin="down" onclick="JKakemono.czyscpola();"><i class="fa fa-minus" aria-hidden="true"></i></a>
			  	</div>
				</li>

				<li id="id_14" class="form-line optionsformline2" style="nothing">
					<label class="form-label-left label-highlight" id="label_14" for="input_14">taille :<strong><span class="highlight small"><br />(Centimètres)</span></strong></label>
					<input type="text" class="taille form-textbox validate[required, Numeric]" placeholder="hauteur" id="input_14" name="q14_taile" size="20" value="1" onclick="JKakemono.czyscpola();" />
					<span class="mLeft highlight">cm</span><span class="heusepar">x</span>
					<input type="text" class="taille form-textbox2 validate[required, Numeric]" id="input_15" placeholder="largeur" name="q15_taile" size="20" value="1" onclick="JKakemono.czyscpola();" /><span class="mRight highlight">cm</span>
				</li>
                <!-- FIN taille et quantité------------------------------------------------->

				<li id="id_7" class="form-line optionsformline">

					<div class="break-line"></div>

					<span class="title">OPTIONS DE LIVRAISON <span class="splitorhide">DISPONIBLES :</span> </span>

					<span class="options_single">

						<span class="optionsleft">
							<label class="form-label-left" id="label_adresse" for="adresse">Livré à l'adresse de votre choix</label>
							<input type="checkbox" class="form-checkbox" id="adresse" name="adresse[]" checked />
							<span class="helpButton">
								<span class="helpText" id="helpTextAdresse" style="visibility:hidden;">Pour être livré directement chez vous ou à votre adresse professionnelle. Par défaut votre adresse de facturation sera utilisée, mais vous pourrez spécifier une adresse de livraison dans votre accès client. </span>
							</span>
						</span>

						<span class="optionsleft">
							<label class="form-label-left" id="label_etiquette" for="etiquette">Retrait colis à l'Atelier</label>
							<input type="checkbox" class="form-checkbox" id="etiquette" name="etiquette[]" value="" onclick="JKakemono.czyscpola();" />
							<span class="helpButton">
								<span class="helpText" id="helpTextetiquette" style="visibility:hidden;">Retrait de votre commande à l'atelier de Vitrolles.</span>
							</span>
						</span>

						<span class="optionsleft">
							<label class="form-label-left" id="label_colis" for="colis">Colis revendeur</label>
							<input type="checkbox" class="form-checkbox" id="colis" name="colis[]" value="" onclick="JKakemono.colisRevendeurcheckbox(); JKakemono.czyscpola(); " />
							<span class="helpButton">
								<span class="helpText" id="helpTextcolis" style="visibility:hidden;">Vous permet d’avoir une expédition neutre sans étiquetage France banderole.</span>
							</span>
						</span>

						<span class="optionsleft">
							<label class="form-label-left" id="label_palette" for="palette">Grand format livré entier</label>
							<input type="checkbox" class="form-checkbox" id="palette" name="palette[]" value="" onclick="JKakemono.colisRevendeurcheckbox(); JKakemono.czyscpola(); " />
							<span class="helpButton">
								<span class="helpText" id="helpTextpalette" style="visibility:hidden;"><strong><u>Forfait palettisation:</u></strong> <span class="highlight">dès 240€ HT</span><br />
								Vous souhaitez que votre panneau publicitaire soit livré en un seul morceau le plus grand possible.</span>
							</span>
						</span>

					</span>

					<div class="break-line"></div>

					<p id="production" >
						<h5 class="delivery-delay">Delai Production :</h5>
						<button class="production" text-value="4-5" id="p1"></button>
						<button class="production" text-value="2-3" id="p2"></button>
						<button class="production" text-value="1-1" id="p3"></button>
						<input type="hidden" id="production-value" value=""  onClick="" />
					</p>
					<div id="delivery-div" style='display:none;'>
						<p id="delivery" >
							<h5 class="delivery-delay">Delai Livraison :</h5>
							<button class="delivery" text-value="3-4" id="l1"></button>
							<button class="delivery" text-value="2-3" id="l2"></button>
							<button class="delivery" text-value="1-1" id="l3"></button>
							<input type="hidden" id="delivery-value" value="" />
						</p>
					</div>

					</li>


					<li id="id_18" class="form-line id_18">
						<div class="form-input-wide">

							<button id="input_18" type="submit" class="form-submit-button" style="display: none;">Submit Form</button>
						</div>
					</li>
					<li style="display:none">
						Should be Empty:
						<input type="text" name="website" value="" />
					</li>
				</ul>
			</div>
			<input type="hidden" id="simple_spc" name="simple_spc" value="1060900217" />
			<script type="text/javascript">
			document.getElementById("simple_spc").value += "-1060900217";
			</script>
		</form>
	</div>
	<div id="preview">

		  <img src="../wp-content/plugins/fbshop/images/arrow.png" alt="arrow" class="arrow" />

		  <div id="container">

		   <div id="slides">
					<li><img src="../wp-content/plugins/fbshop/images/enseignes/slide/test-1.jpg" alt="commencez votre devis en ligne" /></li>
		      <li><img src="../wp-content/plugins/fbshop/images/enseignes/slide/test-2.jpg" alt="commencez votre devis en ligne" /></li>
		      <li><img src="../wp-content/plugins/fbshop/images/banderole/slide/test-3.png" alt="commencez votre devis en ligne" /></li>
		    </div>
		  </div>

			<div id="preview_imag"></div>
			<div id="preview_imag1"></div><!--dibond-->
			<div id="preview_imag2"></div><!--R/V-->
			<div id="preview_imag3"></div><!--impression-->
			<div id="preview_imag4"></div><!--option-->
			<div id="preview_imag5"></div><!--lamination-->
			<div id="preview_imag6"></div><!--perçage-->
			<div id="preview_imag7"></div><!--logo-->


	</div>

	<div class="dateLivraison">
		<!--<span id="totaldays"></span>&nbsp;-->
		<span id="totalamt_7"></span>
		<span id='estdate_7' class="delivery-date"></span>
	</div>

	<div id="custom_price_unit" >

	</div>

<script type="text/javascript">
	////////////////////////////////////////////////////// checkboxes livraison //
	jQuery('#adresse').click(function() {
		if (document.getElementById('adresse').checked) {
			document.getElementById('etiquette').checked = false;
		}
	});
	jQuery('#etiquette').click(function() {
		if (document.getElementById('etiquette').checked) {
			document.getElementById('adresse').checked = false;
		}
	});
	jQuery('#palette').click(function() {
		if (document.getElementById('palette').checked) {
			document.getElementById('etiquette').checked = false;
		}
	});
	jQuery('#etiquette').click(function() {
		if (document.getElementById('etiquette').checked) {
			document.getElementById('palette').checked = false;
		}
	});
	//////////////////////////////////////////////////////////////////////////////
	function Afficher()	{
		divliv = document.getElementById('livraisonrapide');
		if (divliv.style.display == 'none')
		divliv.style.display = 'block';
	}
	function Afficher()	{
		divInfo = document.getElementById('delivery-div');
		if (divInfo.style.display == 'none')
		divInfo.style.display = 'block';
	}
	function Masquer()	{
		divInfo = document.getElementById('delivery-div');
		if (divInfo.style.display == 'block')
		divInfo.style.display = 'none';
	}

	/////////////////////////////////////////////////// calcul des jours ouvrés //
	function AddBusinessDays(weekDaysToAdd) {
	  // fonction jours ouvrés
	  var curdate = new Date();
	  var realDaysToAdd = 0;
	  for(i=0; i<weekDaysToAdd; i++){
	    curdate.setDate(curdate.getDate()+1);
	    var estdt1 = new Date(curdate);
	    var n = curdate.getDay();
	    if (n == '6' || n == '0') {
	      weekDaysToAdd++;
	    }
	    realDaysToAdd++;
	    //check if current day is business day
	  }
	  return realDaysToAdd;
	}

	//////////////////////////////////////////////////////////////////////////////
	jQuery(document).ready(function(){
		jQuery('.delivery , .production').click(function(){
			var cena           = 0; 	 var cena2=0; 		var cena1=0; 		var cenar=0;	 	var cenarv=0; 		prixunite=0;
			var suma           = 0;		 var suma2=0;
			var rabat          = 0;		 var rabat2=0;
			var transport      = 0;
			var ilosc          = 0;
			var metraz 			= 0;
			var ktorytyp       = '';
			var cedzik         = '';
			var prliv          = '';
			var date_panier    = '';
			var dodatkowaopcja = '';
			var Prixlamination   =0;
			var opis           = '';
			var erreurType     = 0;
			var option2        = 0;
			var largeur      = 0;
			var hauteur       = 0;
			var pu             = 0;			var fixations=0; 	var percage=0; 	var puoption=0; var maquette=0; 	var tarifventouse=0; 	var fixationsventouse=0; 	nbtrou=0;
			var aBox              = document.getElementById('form-button-error1');
			var eBox              = document.getElementById('form-button-error2');
			aBox.innerHTML='';		eBox.innerHTML='';

			////////////////////////////////////////////////////////////////////////////
		largeur              = ($('input_15').value);       // largeur = largeur
		largeur              = largeur.replace(',','.');
		largeur              = fixstr(largeur);
		$('input_15').value    = largeur;
		hauteur               = ($('input_14').value);        // hauteur = hauteur
		hauteur               = hauteur.replace(',','.');
		hauteur               = fixstr(hauteur);
		$('input_14').value    = hauteur;
		largeur              = parseFloat(largeur);
		hauteur               = parseFloat(hauteur);
		metraz                 = largeur * hauteur;                    // métrage
		metraz                 = fixstr(metraz);
		var metrazzaokraglony1 = (largeur+hauteur)*2;                // périmètre
		metrazzaokraglony      = Math.round(metrazzaokraglony1);
		var hautbas            = largeur*2;
		var gauchedroite       = hauteur*2;
		var ilosc              = $('input_13').value;
		///////////////////////////////////////////////////////////////////////////

				pu= 0.0030*metraz;

				poids = 1.6*metraz; ////grammage x m²///
				poidstotal = poids*ilosc;


			//////////////////////////////////////////////////////////////////// recto/verso//
			if ($('input_0').value == 'recto') {opis += '<br />- recto';}
			if ($('input_0').value == 'rectoverso') {rectoverso = pu*0.5; pu += rectoverso; opis += '<br />- recto/verso';}
			///////////////////////////////////////////////////////////// fixations //
			if (($('input_4').value == 'ventouse') ){fixationsventouse=0.2; opis += '<br />- ventouse + perçage';} ////prix 1 ventouse/////
			if (($('input_4').value == 'double face')){fixations=0.3; opis += '<br />- double face';}
			////perçage/////
			if (($('input_5').value == '2')){percage=0.4; nbtrou=2; opis += '<br />- 2 trous';}
			if (($('input_5').value == '4') ){percage=0.8; nbtrou=4; opis += '<br />- 4 trous';}
			if (($('input_5').value == '6')){percage=1.2; nbtrou=6; opis += '<br />- 6 trous';}
			if (($('input_5').value == '8') ){percage=1.6; nbtrou=8; opis += '<br />- 8 trous';}
			if (($('input_5').value == '10')){percage=2; nbtrou=10; opis += '<br />- 10 trous';}

			tarifventouse = (fixationsventouse*nbtrou) ////prix x ventouses/////

				//////////////////////////////////////////////////////////////////// lamination//



				if (($('input_lamination').value == 'pelliculage brillant') || ($('input_lamination-perçage').value == 'pelliculage brillant')) {

				if ((hauteur < 150) && (largeur < 150) && (largeur <= hauteur) ) {Prixlamination = 150*(largeur*0.0008);}
				if ((hauteur < 150) && (largeur < 150) && (hauteur <= largeur) ) {Prixlamination = 150*(hauteur*0.0008);}
				if ((hauteur < 150) && (largeur >= 150) ) {Prixlamination = 150*(largeur*0.0008);}
				if ((largeur < 150) && (hauteur >= 150) ) {Prixlamination = 150*(hauteur*0.0008);}

				if ((hauteur < 150) && (largeur == 150) ) {Prixlamination = metraz*0.0008;}
				if ((largeur < 150) && (hauteur == 150) ) {Prixlamination = metraz*0.0008;}

				if ((hauteur < 150) && (largeur < 150) && (hauteur <= largeur) ) {Prixlamination = 150*(hauteur*0.0008);}
				if ((hauteur >= 150) && (largeur >= 150) ) {Prixlamination = metraz*0.0008;}
				opis += '<br />- pelliculage brillant';
				}


				if (($('input_lamination').value == 'pelliculage mat') || ($('input_lamination-perçage').value == 'pelliculage mat')) {
				if ((hauteur < 150) && (largeur < 150) && (largeur <= hauteur) ) {Prixlamination = 150*(largeur*0.0010);}
				if ((hauteur < 150) && (largeur < 150) && (hauteur <= largeur) ) {Prixlamination = 150*(hauteur*0.0010);}
				if ((hauteur < 150) && (largeur >= 150) ) {Prixlamination = 150*(largeur*0.0010);}
				if ((largeur < 150) && (hauteur >= 150) ) {Prixlamination = 150*(hauteur*0.0010);}

				if ((hauteur < 150) && (largeur == 150) ) {Prixlamination = metraz*0.0010;}
				if ((largeur < 150) && (hauteur == 150) ) {Prixlamination = metraz*0.0010;}

				if ((hauteur < 150) && (largeur < 150) && (hauteur <= largeur) ) {Prixlamination = 150*(hauteur*0.0010);}
				if ((hauteur >= 150) && (largeur >= 150) ) {Prixlamination = metraz*0.0010;}
				opis += '<br />- pelliculage mat';
				}

				if (($('input_lamination').value == 'pelliculage laqué anti graffiti') || ($('input_lamination-perçage').value == 'pelliculage laqué anti graffiti')) {
				if ((hauteur < 150) && (largeur < 150) && (largeur <= hauteur) ) {Prixlamination = 150*(largeur*0.0018);}
				if ((hauteur < 150) && (largeur < 150) && (hauteur <= largeur) ) {Prixlamination = 150*(hauteur*0.0018);}
				if ((hauteur < 150) && (largeur >= 150) ) {Prixlamination = 150*(largeur*0.0018);}
				if ((largeur < 150) && (hauteur >= 150) ) {Prixlamination = 150*(hauteur*0.0018);}

				if ((hauteur < 150) && (largeur == 150) ) {Prixlamination = metraz*0.0018;}
				if ((largeur < 150) && (hauteur == 150) ) {Prixlamination = metraz*0.0018;}

				if ((hauteur < 150) && (largeur < 150) && (hauteur <= largeur) ) {Prixlamination = 150*(hauteur*0.0018);}
				if ((hauteur >= 150) && (largeur >= 150) ) {Prixlamination = metraz*0.0018;}
				opis += '<br />- pelliculage laqué anti graffiti';
				}


			//////////////////////////////////////////////////////// choix maquette //
			if ($('input_6').value == 'fb') {
			maquette=19;
			opis += '<br />- France banderole crée la maquette';
			}

			if (($('input_6').value == 'user')) {
			opis += '<br />- BAT en ligne';
			maquette=5;
			}
			if (($('input_6').value == 'config') ) {
			maquette=5;
			opis += '<br />- je crée ma maquette en ligne';
			}
			if ($('input_6').value == 'sansbat') {
			opis += '<br />- je ne souhaite pas de BAT';
			}



			///////////////////////////////////////////////////////// tarif unitaire//
			puoption = pu+fixations+percage+tarifventouse+Prixlamination;
			puoption2 = puoption+(maquette/ilosc);
			////total/////
			cena = (puoption*ilosc)+maquette;

			//////////////////////////////////////////////////////////////////// HD //
			if ($('input_HD').value == 'HD') {HD = cena*0.40; cena += HD; opis += '<br />- Impression HD';}
			if ($('input_HD').value == 'standard') {opis += '<br />- Impression standard';}
			////FIN HD///

			//////////////////////////////////////////////////////signature
			if ($('input_signature').value == 'signature FB') {
				opis += '<br />- signature France Banderole';
			}
			if ($('input_signature').value == 'sans signature') {
				if ( !$('revendeur') && !$('revendeurRS') ) {cena+= 5*ilosc;};
				opis += '<br />- sans signature';
			}

			/////////////////////////////////////////////////////////////// options //
			var colis = $$('#colis').collect(function(e){ return e.checked; }).any();
			if (colis == true) {
				if ( !$('revendeur') && !$('revendeurRC') ) {cena+= 2*ilosc;}
				cedzik += '<br />- colis revendeur';
			}

			var relais = $$('#relais').collect(function(e){ return e.checked; }).any();
			if (relais == true) {
				cena += 5.00;
				cedzik += '<br />- relais colis';
			}

			var etiquette = $$('#etiquette').collect(function(e){ return e.checked; }).any();
			if (etiquette == true) {
				transport=0;
				cena -= cena*3/100;
				cedzik += '<br />- retrait colis a l\'atelier';
			}

			var palette = $$('#palette').collect(function(e){ return e.checked; }).any();
			if (palette == true) {
				if ((largeur+hauteur > 200) && (largeur+hauteur <= 300)) {cena += 90;}
				if ((largeur+hauteur > 300) && (largeur+hauteur <= 400)) {cena += 160;}
				if (largeur+hauteur > 400) {cena += 240;}
				cedzik += '<br />- forfait palettisation';
			}

			// fin options //////////////////////////////////////////////////////
			/////////////////////////////////////////////////////////// transport //

			if (poidstotal <= 1) {prixtransport=4.80;}
			if ((poidstotal > 1) && (poidstotal <= 2)) {prixtransport=5.1;}
			if ((poidstotal > 2) && (poidstotal <= 3)) {prixtransport=5.67;}
			if ((poidstotal > 3) && (poidstotal <= 4)) {prixtransport=5.63;}
			if ((poidstotal > 4) && (poidstotal <= 5)) {prixtransport=6.88;}
			if ((poidstotal > 5) && (poidstotal <= 6)) {prixtransport=7.99;}
			if ((poidstotal > 6) && (poidstotal <= 7)) {prixtransport=7.99;}
			if ((poidstotal > 7) && (poidstotal <= 10)) {prixtransport=9.30;}
			if ((poidstotal > 10) && (poidstotal <= 15)) {prixtransport=11.93;}
			if ((poidstotal > 15) && (poidstotal <= 20)) {prixtransport=14.93;}
			if ((poidstotal > 20) && (poidstotal <= 25)) {prixtransport=18.82;}
			if ((poidstotal > 25) && (poidstotal <= 30)) {prixtransport=20.56;}
			if ((poidstotal > 30) && (poidstotal <= 40)) {prixtransport=25.64;}
			if ((poidstotal > 40) && (poidstotal <= 50)) {prixtransport=33.73;}
			if ((poidstotal > 50) && (poidstotal <= 60)) {prixtransport=42.14;}
			if ((poidstotal > 60) && (poidstotal <= 70)) {prixtransport=47.71;}
			if ((poidstotal > 70) && (poidstotal <= 80)) {prixtransport=55.26;}
			if ((poidstotal > 80) && (poidstotal <= 90)) {prixtransport=62.12;}
			if ((poidstotal > 90) && (poidstotal <= 100)) {prixtransport=68.54;}
			if (poidstotal > 100) {prixtransport=69.26;}
			prixtransport2 = prixtransport*0.4;
			transport = prixtransport + prixtransport2;


			var iloscmetrow1=metraz*ilosc;
			iloscmetrow=iloscmetrow1/10000;
			prixunite = cena;
			cena=prixunite*ilosc;

			prixunite=fixstr(prixunite);
			cena2 = prixunite.replace(".", ",");

			///////////////////////////////////////////// affichage jours livraison //
      var myClass = jQuery(this).attr("class");
      var erreurType = 0;

      var n = myClass.search("production");
      if (n != -1) {
        jQuery('.production').prop("disabled",false);
        jQuery('.production').removeClass('active');
        jQuery(this).addClass('active');
        var production = jQuery(this).attr('onClick');
        jQuery('#production-value').val(Afficher());
        var production = jQuery(this).attr('text-value');
        jQuery('#production-value').val(production);
        jQuery(this).prop("disabled",true);
      }

      var m = myClass.search("delivery");
      if (m != -1) {
        jQuery('.delivery').prop("disabled",false);
        jQuery('.delivery').removeClass('active');
        jQuery(this).addClass('active');
        var delivery = jQuery(this).attr('text-value');
        jQuery('#delivery-value').val(delivery);
        jQuery(this).prop("disabled",true);


        jQuery(document).ready(function(){
          jQuery('.jotform-form select').click(function(){
            jQuery('#delivery-value').val(Masquer());
            jQuery('.delivery').prop("disabled",false);
            jQuery('.production').prop("disabled",false);
            jQuery('.production').removeClass('active');
            jQuery(this).addClass('');
            jQuery('.delivery').removeClass('active');
            jQuery(this).addClass('active');
            jQuery(production-value).prop("disabled",false);
            jQuery(delivery-value).prop("disabled",true);
          });
        });

        jQuery(document).ready(function(){
          jQuery('.form-textbox').click(function(){
            jQuery('#delivery-value').val(Masquer());
            jQuery('.delivery').prop("disabled",false);
            jQuery('.production').prop("disabled",false);
            jQuery('.production').removeClass('active');
            jQuery(this).addClass('');
            jQuery('.delivery').removeClass('active');
            jQuery(this).addClass('active');
            jQuery(production-value).prop("disabled",false);
            jQuery(delivery-value).prop("disabled",true);
          });
        });

        jQuery(document).ready(function(){
          jQuery('.form-textbox2').click(function(){
            jQuery('#delivery-value').val(Masquer());
            jQuery('.delivery').prop("disabled",false);
            jQuery('.production').prop("disabled",false);
            jQuery('.production').removeClass('active');
            jQuery(this).addClass('');
            jQuery('.delivery').removeClass('active');
            jQuery(this).addClass('active');
            jQuery(production-value).prop("disabled",false);
            jQuery(delivery-value).prop("disabled",true);
          });
        });

        jQuery(document).ready(function(){
          jQuery('.form-checkbox').click(function(){
            jQuery('#delivery-value').val(Masquer());
            jQuery('.delivery').prop("disabled",false);
            jQuery('.production').prop("disabled",false);
            jQuery('.production').removeClass('active');
            jQuery(this).addClass('');
            jQuery('.delivery').removeClass('active');
            jQuery(this).addClass('active');
            jQuery(production-value).prop("disabled",false);
            jQuery(delivery-value).prop("disabled",true);
          });
        });
      }

      var production      = jQuery('#production-value').val();
      var delivery        = jQuery('#delivery-value').val();

      if(production && delivery){
        // Calculate price
        var ProdPercent = '';
        var DeliPercent = '';
        var PorductType = jQuery('.production.active').attr('text-value');
        var DeliveryType = jQuery('.delivery.active').attr('text-value');
        if(PorductType == '2-3' ){
          ProdPercent = 20;
          prliv += '<br />- P 2-3J';
        }else if(PorductType =='1-1'){
          ProdPercent = 45;
          prliv += '<br />- P 1J';
        }else{
          ProdPercent = 0;
          prliv += '<br />- P 4-5J';
        }

        if(DeliveryType == '2-3'){
          DeliPercent = 20;
          prliv += ' / L 2-3J';
        }else if(DeliveryType =='1-1'){
          DeliPercent = 45;
          prliv += ' / L 1J';
        }else{
          DeliPercent = 0;
          prliv += ' / L 3-4J';
        }

        var price_unit = parseFloat(prixunite);
        var totalPercente        = parseInt(DeliPercent) + parseInt(ProdPercent);
        var calculatedTotalPrice = (price_unit) * (totalPercente)/100;
        var finalPrice           = (calculatedTotalPrice + price_unit)/ilosc;

        ////////////////////////////////////////////////////// Calculate Days //
        var prod_first_val  = parseInt(production[0]);
        var prod_second_val = parseInt(production[2]);
        var deli_first_val  = parseInt(delivery[0]);
        var deli_second_val = parseInt(delivery[2]);

        var totalProduction = prod_first_val + deli_first_val;
        var totalDelivery   = prod_second_val + deli_second_val;
        if(totalProduction == totalDelivery){
          jQuery('#totaldays').text("Total jours " + totalProduction);
          var days = totalProduction;
        }else{
          jQuery('#totaldays').text("Total jours "+totalProduction+'/'+totalDelivery);
          var days = totalDelivery;
        }

        var curdate = new Date();
        var curhour = curdate.getHours();
        // ajout 1 jour ouvré de délai sur commande après 12h
        if (curhour >= 12) {
          var daystoadd = AddBusinessDays(days+1);
        }else{
          var daystoadd = AddBusinessDays(days);
        }

        curdate.setDate(curdate.getDate()+daystoadd);
        var estdt = new Date(curdate);
        var month = estdt.getMonth()+1;
        var day = estdt.getDate();
        var output = day + '/' + (month<10 ? '0' : '') + month + '/' + (day<10 ? '' : '') + estdt.getFullYear();

        if(jQuery('#id_7').css('display') != 'none') {
          jQuery('#estdate_7').html('Date de livraison max : '+output+'  <a class="linkUppercase modal-link" href="../wp-content/etre-livre-rapidement/" target="_blank"><i class="fa fa-info-circle" aria-hidden="true"></i></a>');
        }

        finalPrice1=fixstr(finalPrice);
        finalPrice2 = finalPrice1.replace(".", ",");


        jQuery('#prix_unitaire').html(finalPrice2+' &euro;');
        jQuery('#remise').html(rabat2);
      }

      ////////////////////////////////////////////////////// prix avec délais //
      prixunite = finalPrice1;
      cena=prixunite*ilosc;

      //////////////////////////////////////////////////////////////// remise //
			var prix = document.getElementById("prix_unitaire");
      var total = document.getElementById("total");
      var remise = document.getElementById("remise");

      prixunite=fixstr(prixunite);
      transport=0;

      //////////////////////////////////////////////////////////////////////////
      cena2 = prixunite.replace(".", ",");
      //////////////////////////////////////////////////////////////////////////

			//////////////////////////////////////////////////////////////////////////

			var warning = '';
			aBox.style.display="none";
			//////////////////////////////////// 	avertissements, messages d'erreur //

			if ( (hauteur > 100) || (largeur > 100) ) {
					warning += '- Enseigne livrée découpée en mètre linéaire.<br />Si vous souhaitez votre enseigne en 1 morceau, veuillez cocher l\'option "Grand format livré entier" (uniquement pour une enseigne inférieure à 100x200cm).<br />';
					aBox.style.display="block";
					erreurType=0;
			}

			if ( ((hauteur > 100) && (palette == true)) || ((largeur > 100) && (palette == true)) ) {
					warning = '';
					aBox.style.display="none";
					erreurType=0;
			}

			if ( ((hauteur > 100) && (largeur > 200)) || ((hauteur > 200) && (largeur > 100)) ) {
					warning += '- Votre panneau est supérieur à 100x200cm, il sera donc produit sur plusieurs plaques<br />';
					aBox.style.display="block";
					erreurType=0;
			}

			if ( ((hauteur < 20 ) && (largeur < 30 )) || (( hauteur < 30 ) && (largeur < 20 )) ){
				eBox.innerHTML = '<button class="closeButton"><i class="ion-ios-close-empty" aria-hidden="true"></i></button><img src="../wp-content/themes/fb/images/exclamation-octagon.png" class="exclam" alt="attention" /> TAILLE MINIMALE 20x30cm !';
				eBox.style.display="block";
				erreurType=2;
			}

			aBox.innerHTML = '<button class="closeButton"><i class="ion-ios-close-empty" aria-hidden="true"></i></button><div class="alertIcn"><img src="../wp-content/themes/fb/images/exclamation-octagon.png" class="exclam" alt="attention" /></div><div class="alertTxt">'+warning+'</div>';

			////////////////////////////// formulaire cas particulier erreurType==1 //

			if (erreurType==2) {
				aBox.style.display="none";
				jQuery('#submit_cart').css('display', 'none');
				jQuery('#prix_unitaire').html('-');
				//remise.innerHTML='-';
				var opt = document.getElementById("option");
				prix.innerHTML='-';
				opt.innerHTML='-';
				total.innerHTML='-';
				var newtotal = document.getElementById("total");
				newtotal.innerHTML='-';
				newopt.innerHTML='-';
				rabat2='-';
				prix.innerHTML='-';
				remise.innerHTML='-';
				total.innerHTML='-';
				dodajkoszyk.innerHTML = '';
			}

			///////////livraison le jour même////////
			if ((DeliveryType == '1-1') && (PorductType == '1-1')){
				livraisonrapide.style.display = 'block';
			}	else {livraisonrapide.style.display = 'none';}
			/////////////////////////////////////////

			if ((erreurType==0) && ((DeliveryType == '2-3') || (DeliveryType == '1-1') || (DeliveryType == '3-4'))){
				suma=cena-rabat;
				suma=fixstr(suma);
				suma2 = suma.replace(".", ",");
				total.innerHTML=suma2+' &euro;';


				var forfait = 29 - suma;
				if (forfait > 0) {
					forfait = fixstr(forfait);
					jQuery('#forfait').html('FORFAIT '+forfait+' &euro; - ');
					var newoption = parseFloat(forfait);
					newoption=fixstr(newoption);
					newoption2 = newoption.replace(".", ",");
					option2 = newoption2;
					var newopt = document.getElementById("option");
					newopt.innerHTML=newoption2+' &euro;';
					suma = 29;
					suma=fixstr(suma);
					suma2 = suma.replace(".", ",");
					var newtotal = document.getElementById("total");
					newtotal.innerHTML=suma2+' &euro;';
				}

				////////////////////////////////////////////////// envoi formulaire //
				var rodzaj = "Kömadur";
				var dodajkoszyk = document.getElementById("cart_form");
				var base64;

				jQuery('#preview .arrow').hide();

				if(!document.documentMode){ // ne pas charger ce script sous IE
					domtoimage.toBlob(document.getElementById('preview')).then(function (blob) {
						saveBlobAsFile(blob, "XX.png").then(function (data) {
							base64 = data;
							sendData();
						});
					});

					// this function is to convert blob to base64 img
					function saveBlobAsFile(blob, fileName) {
						return new Promise(function (resolve, reject) {
							var reader = new FileReader();
							reader.readAsDataURL(blob);
							reader.onload = function () {
								return resolve(reader.result);
							};
							reader.onerror = function (error) {
								return reject(error);
							};
							return Promise.resolve(reader.result);
						});
					}

					function sendData() {
						dodajkoszyk.innerHTML += '<input type="hidden" name="image" value="'+base64+'" />';
					}
				}


				dodajkoszyk.innerHTML = '<input type="hidden" name="addtocart" value="addtocart" /><input type="hidden" name="rodzaj" value="'+rodzaj+'" /><input type="hidden" name="opis" value="- H|'+hauteur+' x L|'+largeur+' cm'+opis+cedzik+prliv+'" /><input type="hidden" name="ilosc" value="'+ilosc+'" /><input type="hidden" name="prix" value="'+cena2+' &euro;" /><input type="hidden" name="option" value="'+option2+'" /><input type="hidden" name="remise" value="-" /><input type="hidden" name="total" value="'+suma2+' &euro;" /><input type="hidden" name="transport" value="'+transport+' &euro;" /><input type="hidden" name="hauteur" value="'+hauteur+'" /><input type="hidden" name="largeur" value="'+largeur+'" /><button id="submit_cart" type="submit"><i class="fa fa-shopping-cart" aria-hidden="true"></i> ajouter au panier</button> ';
				livraisonComp.style.display = 'block';

			}	else{
				suma= '-';
				suma2 = '-';
				total.innerHTML=suma2;
				$('submit_cart').style.display = 'none';
				livraisonComp.style.display = 'none';
			}

		});
	});
</script>
